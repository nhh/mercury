plugins {
	id 'java'
}

group = 'com.niklashanft'
version = '0.0.1-SNAPSHOT'
sourceCompatibility = '1.8'
targetCompatibility = '1.8'

repositories {
	mavenCentral()
	maven {
		url "https://hub.spigotmc.org/nexus/content/repositories/snapshots"
	}
	maven {
		url = "https://oss.sonatype.org/content/repositories/snapshots/"
	}
}

task fatJar(type: Jar) {
	manifest {
		attributes 'Implementation-Title': 'Gradle Jar File Example',
				'Implementation-Version': version,
				'Main-Class': 'com.niklashanft.mercury.MercuryPlugin'
	}
	baseName = project.name + '-all'
	from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
	with jar
}

dependencies {
	compileOnly "org.spigotmc:spigot-api:1.14.4-R0.1-SNAPSHOT"
	compile 'dev.morphia.morphia:core:1.5.3'
	compile 'org.mongodb:mongo-java-driver:2.12.3'
	compile 'com.sparkjava:spark-core:2.3'
}

test {
	useJUnitPlatform()
}
